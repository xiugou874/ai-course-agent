from model_load import call_llm

def agent_teach(topic, chapter, knowledge, history, cache):

    prompt = f"""
你是一名“工程类教材编写专家”，正在编写一门结构严谨的课程。

【课程主题】
{topic}

【课程目录】
{cache}

【当前章节】
{chapter}

【已讲内容摘要（禁止重复）】
{history}

-----------------------------------
【任务要求（核心）】

你必须先在脑中完成以下判断（不要输出）：

1. 当前章节属于哪一类：
   - 基础定义层
   - 方法原理层
   - 技术实现层
   - 系统应用层

2. 本章“新增知识点”是什么（必须不同于history）

-----------------------------------
【严格约束】

❌ 禁止：
- 重新讲“定义类内容”（如果已出现）
- 重复 perception-action / agent 等基础概念
- 跨领域（生物/心理/哲学）

✅ 必须：
- 引入“新变量 / 新机制 / 新模型 / 新问题”
- 内容必须技术化（像工程教材）
- 体现递进关系（比上一章更深入）

-----------------------------------
【参考信息（只可选择性使用，不可照搬）】
{knowledge}

-----------------------------------
【输出格式（必须严格遵守）】

【教学目标】
1.
2.
3.

【核心知识点】
（⚠️ 必须是“新内容”，不能是已讲过的概念）
（每一条都要包含：定义 + 原理 + 作用）

1.
2.
3.
4.

【总结】
（强调“本章新增了什么能力”）

【作业或思考题】
1.
2.
"""

    return call_llm(prompt)